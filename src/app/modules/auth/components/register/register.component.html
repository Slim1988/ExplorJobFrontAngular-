<div class="register-wrapper">

    <div class="register-fieldset fieldset-responsive-from-top">
        
        <div #windowTop></div>

        <h2 class="register-fieldset-title">
            Inscription
        </h2>

        <div *ngIf="registrationIsEnable()" class="register-form">

            <p-messages></p-messages>

            <form
                [formGroup]="registerForm"
                (ngSubmit)="register()">

                <div class="input-wrapper">
                    <input
                        pInputText
                        type="text"
                        formControlName="email"
                        (keyup)="clearRegisterFormEmail()"
                        placeholder="Email"
                        class="input">

                    <div
                        *ngIf="registerForm.controls.email.invalid && (registerForm.controls.email.dirty && registerForm.controls.email.touched)"
                        class="input-messages">
                        <p-message
                            *ngIf="registerForm.controls.email.errors.required"
                            severity="error"
                            text="L'email est requis">
                        </p-message>
                        <p-message
                            *ngIf="registerForm.controls.email.errors.email"
                            severity="error"
                            text="L'email est invalide">
                        </p-message>
                    </div>
                </div>

                <div class="input-wrapper">
                    <input
                        pInputText
                        type="text"
                        formControlName="confirmEmail"
                        (keyup)="clearRegisterFormConfirmEmail()"
                        placeholder="Confirmez l'email"
                        class="input"
                        onpaste="return false;">

                    <div
                        *ngIf="registerForm.controls.confirmEmail.invalid && (registerForm.controls.confirmEmail.dirty && registerForm.controls.confirmEmail.touched)"
                        class="input-messages">
                        <p-message
                            *ngIf="registerForm.controls.confirmEmail.errors.required"
                            severity="error"
                            text="La confirmation de l'email est requise">
                        </p-message>
                        <p-message
                            *ngIf="registerForm.controls.confirmEmail.errors.confirmEmail"
                            severity="error"
                            text="Les emails doivent être identiques">
                        </p-message>
                    </div>
                </div>

                <div class="input-wrapper">
                    <input
                        pInputText
                        type="text"
                        formControlName="firstName"
                        placeholder="Prénom"
                        class="input">

                    <div
                        *ngIf="registerForm.controls.firstName.invalid && (registerForm.controls.firstName.dirty && registerForm.controls.firstName.touched)"
                        class="input-messages">
                        <p-message
                            *ngIf="registerForm.controls.firstName.errors.required"
                            severity="error"
                            text="Le prénom est requis">
                        </p-message>
                        <p-message
                            *ngIf="registerForm.controls.firstName.errors.minlength || registerForm.controls.firstName.errors.maxlength"
                            severity="error"
                            text="Le prénom doit être comprit entre 3 et 100 caractères">
                        </p-message>
                    </div>
                </div>

                <div class="input-wrapper">
                    <input
                        pInputText
                        type="text"
                        formControlName="lastName"
                        placeholder="Nom"
                        class="input">

                    <div
                        *ngIf="registerForm.controls.lastName.invalid && (registerForm.controls.lastName.dirty && registerForm.controls.lastName.touched)"
                        class="input-messages">
                        <p-message
                            *ngIf="registerForm.controls.lastName.errors.required"
                            severity="error"
                            text="Le nom est requis">
                        </p-message>
                        <p-message
                            *ngIf="registerForm.controls.lastName.errors.minlength || registerForm.controls.lastName.errors.maxlength"
                            severity="error"
                            text="Le nom doit être comprit entre 3 et 100 caractères">
                        </p-message>
                    </div>
                </div>

                <div class="input-wrapper">

                    <div class="input-date register-form-input-date">
                        <input matInput
                        formControlName="birthDate"
                        placeholder="Date de naissance"
                        [matDatepicker]="birth"
                        class="birth-input">
                        <mat-datepicker #birth></mat-datepicker>
                        <mat-datepicker-toggle matSuffix [for]="birth">
                            <mat-icon matDatepickerToggleIcon>
                                keyboard_arrow_down
                            </mat-icon>
                        </mat-datepicker-toggle>
                    </div>

                    <div
                        *ngIf="registerForm.controls.birthDate.invalid && (registerForm.controls.birthDate.dirty && registerForm.controls.birthDate.touched)"
                        class="input-messages">
                        <p-message
                            *ngIf="registerForm.controls.birthDate.errors.required"
                            severity="error"
                            text="La date ne naissance est requise">
                        </p-message>
                    </div>
                </div>
                <div class="input-wrapper">
                    <div class="input-date register-form-input-zipcode">
                        <p-inputMask
                        mask="{{ zipCodeMask }}"
                        formControlName="addressZipCode"
                        placeholder="Code Postal"
                        class="input-mask-register account-profile-contact-informations-form-input-mask">
                    </p-inputMask>
                    </div>

                    <div
                        *ngIf="registerForm.controls.addressZipCode.invalid && (registerForm.controls.addressZipCode.dirty && registerForm.controls.addressZipCode.touched)"
                        class="input-messages">
                        <p-message
                            *ngIf="registerForm.controls.addressZipCode.errors.required"
                            severity="error"
                            text="Le code postal est requise">
                        </p-message>
                    </div>
                </div>
                <div class="input-wrapper">
                    <input
                        pPassword
                        type="password"
                        feedback
                        formControlName="password"
                        placeholder="Mot de passe"
                        class="input">

                    <div
                        *ngIf="registerForm.controls.password.invalid && (registerForm.controls.password.dirty && registerForm.controls.password.touched)"
                        class="input-messages">
                        <p-message
                            *ngIf="registerForm.controls.password.errors.required"
                            severity="error"
                            text="Le mot de passe est requis">
                        </p-message>
                        <p-message
                            *ngIf="registerForm.controls.password.errors.minlength"
                            severity="error"
                            text="Le mot de passe doit faire au moins 8 caractères">
                        </p-message>
                    </div>
                </div>

                <div class="input-wrapper">
                    <input
                        pPassword
                        type="password"
                        feedback
                        formControlName="confirmPassword"
                        placeholder="Confirmez le mot de passe"
                        class="input">

                    <div
                        *ngIf="registerForm.controls.confirmPassword.invalid && (registerForm.controls.confirmPassword.dirty && registerForm.controls.confirmPassword.touched)"
                        class="input-messages">
                        <p-message
                            *ngIf="registerForm.controls.confirmPassword.errors.required"
                            severity="error"
                            text="La confirmation du mot de passe est requise">
                        </p-message>
                        <p-message
                            *ngIf="registerForm.controls.confirmPassword.errors.confirmPassword"
                            severity="error"
                            text="Les mots de passe doivent être identiques">
                        </p-message>
                    </div>
                </div>

                <div class="input-wrapper">
                    <div class="register-input-accept-cgu">
                        <p-checkbox formControlName="acceptCGU" class="input-checkbox"></p-checkbox>
                        <div>
                            J'accepte les <a routerLink="/cgu" target="_blank" class="register-cgu-link cursor-pointer bold explorjob-green">Conditions Générales d'Utilisation</a>
                        </div>
                    </div>

                    <div
                        *ngIf="registerForm.controls.acceptCGU.invalid && (registerForm.controls.acceptCGU.dirty || registerForm.controls.acceptCGU.touched)"
                        class="input-messages">
                        <p-message
                            *ngIf="registerForm.controls.acceptCGU.errors.required"
                            severity="error"
                            text="Vous devez accepter les CGU">
                        </p-message>
                    </div>
                </div>

                <div class="input-wrapper">
                    <div class="register-input-accept-legal-notices">
                        <p-checkbox formControlName="acceptLegalNotices" class="input-checkbox"></p-checkbox>
                        <div>
                            J'accepte les <a routerLink="/legal-notices" target="_blank" class="register-legal-notices-link cursor-pointer bold explorjob-green">Mentions Légales</a>
                        </div>
                    </div>

                    <div
                        *ngIf="registerForm.controls.acceptLegalNotices.invalid && (registerForm.controls.acceptLegalNotices.dirty || registerForm.controls.acceptLegalNotices.touched)"
                        class="input-messages">
                        <p-message
                            *ngIf="registerForm.controls.acceptLegalNotices.errors.required"
                            severity="error"
                            text="Vous devez accepter les Mentions Légales">
                        </p-message>
                    </div>
                </div>

                <div class="buttons-wrapper">
                    <button
                        pButton
                        type="submit"
                        label="S'inscrire"
                        [disabled]="!registerForm.valid"
                        class="button register-form-button">
                    </button>
                </div>

            </form>

            <hr class="register-login-separator">

            <div>
                Vous avez déjà un compte ? <a routerLink="/login" class="register-login-link cursor-pointer bold explorjob-orange">Connexion</a>
            </div>

        </div>

        <div *ngIf="!registrationIsEnable()" class="register-disable">
            <p>
                L'inscription est actuellement désactivée.
            </p>
            <p>
                Veuillez réessayer ultérieurement.
            </p>
        </div>

    </div>

</div>
